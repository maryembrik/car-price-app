<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Price Prediction</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="cars.css?v=2">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="imgs/logo.png"/>
</head>
<body>
    <div class="container">
        <h1 class="text-center">Car Price Prediction</h1>
       <!-- <p class="text-center">Fill in the details below to predict the car price</p>  --!>

        <form id="predictionForm">
            <!-- Row 1 -->
            <div class="row">
                <div class="col-md-4">
                    <input type="number" id="Airbags" name="Airbags" class="form-control" placeholder="Airbags (0 - 16)">
                </div>
                <div class="col-md-4">
                    <input type="number" id="Prod_year" name="Prod_year" class="form-control" min="1886" max="2024" placeholder="Production Year (1939 to 2020)" required>
                </div>
                <div class="col-md-4">
                    <input type="number" id="Levy" name="Levy" class="form-control" placeholder="Levy (87 - 11714)" required>
                </div>
            </div>

            <!-- Row 2 -->
            <div class="row mt-3">
                <div class="col-md-4">
                    <input type="number" id="Cylinders" name="Cylinders" class="form-control" placeholder="Cylinders (1 - 16)" required>
                </div>
                <div class="col-md-4">
                    <input type="number" step="0.1" id="Engine_volume" name="Engine_volume" class="form-control" placeholder="Engine Volume (0.0 - 20.0)" required>
                </div>
                <div class="col-md-4">
                    <input type="number" id="Mileage" name="Mileage" class="form-control" placeholder="Mileage (Km)" required>
                </div>
            </div>

            <!-- Row 3 -->
            <div class="row mt-3">
                <div class="col-md-4">
                    <select id="Fuel_type" name="Fuel_type" class="form-select" required>
                        <option value="">Select Fuel Type</option>
                        <option value="Hybrid">Hybrid</option>
                        <option value="Petrol">Petrol</option>
                        <option value="Diesel">Diesel</option>
                        <option value="CNG">CNG</option>
                        <option value="Plug-in Hybrid">Plug-in Hybrid</option>
                        <option value="LPG">LPG</option>
                        <option value="Hydrogen">Hydrogen</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Category" name="Category" class="form-select" required>
                        <option value="">Select Category</option>
                        <option value="Jeep">Jeep</option>
                        <option value="Hatchback">Hatchback</option>
                        <option value="Sedan">Sedan</option>
                        <option value="Microbus">Microbus</option>
                        <option value="Goods wagon">Goods wagon</option>
                        <option value="Universal">Universal</option>
                        <option value="Coupe">Coupe</option>
                        <option value="Minivan">Minivan</option>
                        <option value="Cabriolet">Cabriolet</option>
                        <option value="Limousine">Limousine</option>
                        <option value="Pickup">Pickup</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Leather_interior" name="Leather_interior" class="form-select" required>
                        <option value="">Leather Interior ?</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
            </div>

            <!-- Row 4 -->
            <div class="row mt-3">
                <div class="col-md-4">
                    <select id="Model" name="Model" class="form-select" required>
                        <option value="">Select Model</option>
                        <option value="Prius">Prius</option>
                        <option value="RX 450">RX 450</option>
                        <option value="Sonata">Sonata</option>
                        <option value="Camry">Camry</option>
                        <option value="Elantra">Elantra</option>
                        <option value="E 350">E 350</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Gear_box_type" name="Gear_box_type" class="form-select" required>
                        <option value="">Select Gear Box Type</option>
                        <option value="Automatic">Automatic</option>
                        <option value="Manual">Manual</option>
                        <option value="Tiptronic">Tiptronic</option>
                        <option value="Variator">Variator</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Drive_wheels" name="Drive_wheels" class="form-select" required>
                        <option value="">Select Drive Wheels</option>
                        <option value="4x4">4x4</option>
                        <option value="Front">Front</option>
                        <option value="Rear">Rear</option>
                    </select>
                </div>
            </div>

            <!-- Row 5 -->
            <div class="row mt-3">
                <div class="col-md-4">
                    <select id="Wheel" name="Wheel" class="form-select" required>
                        <option value="">Wheels</option>
                        <option value="Left wheel">Left wheel</option>
                        <option value="Right-hand drive">Right-hand drive</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Color" name="Color" class="form-select" required>
                        <option value="">Select Color</option>
                        <option value="Silver">Silver</option>
                        <option value="Black">Black</option>
                        <option value="White">White</option>
                        <option value="Grey">Grey</option>
                        <option value="Blue">Blue</option>
                        <option value="Green">Green</option>
                        <option value="Red">Red</option>
                        <option value="Sky blue">Sky blue</option>
                        <option value="Orange">Orange</option>
                        <option value="Yellow">Yellow</option>
                        <option value="Brown">Brown</option>
                        <option value="Golden">Golden</option>
                        <option value="Beige">Beige</option>
                        <option value="Carnelian red">Carnelian red</option>
                        <option value="Purple">Purple</option>
                        <option value="Pink">Pink</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select id="Manufacturer" name="Manufacturer" class="form-select" required>
                        <option value="">Select Manufacturer</option>
                        <option value="LEXUS">LEXUS</option>
                        <option value="CHEVROLET">CHEVROLET</option>
                        <option value="HONDA">HONDA</option>
                        <option value="FORD">FORD</option>
                        <option value="HYUNDAI">HYUNDAI</option>
                        <option value="TOYOTA">TOYOTA</option>
                        <option value="MERCEDES-BENZ">MERCEDES-BENZ</option>
                        <option value="OPEL">OPEL</option>
                        <option value="PORSCHE">PORSCHE</option>
                        <option value="BMW">BMW</option>
                        <option value="JEEP">JEEP</option>
                        <option value="VOLKSWAGEN">VOLKSWAGEN</option>
                        <option value="AUDI">AUDI</option>
                        <option value="RENAULT">RENAULT</option>
                        <option value="NISSAN">NISSAN</option>
                        <option value="SUBARU">SUBARU</option>
                        <option value="DAEWOO">DAEWOO</option>
                        <option value="KIA">KIA</option>
                        <option value="MITSUBISHI">MITSUBISHI</option>
                        <option value="SSANGYONG">SSANGYONG</option>
                        <option value="MAZDA">MAZDA</option>
                        <option value="TESLA">TESLA</option>
                        <option value="GREATWALL">GREATWALL</option>
                        <option value="ASTON MARTIN">ASTON MARTIN</option>
                    </select>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="btn">
                <button type="button" class="btn btn-primary" onclick="submitForm()">Predict</button>
            </div>
        </form>

        <!-- Prediction Output -->
        <div class="output mt-4" id="output"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        async function submitForm() {
            const form = document.getElementById('predictionForm');
            const formData = new FormData(form);
            const data = {};

            formData.forEach((value, key) => {
                data[key] = value;
            });

            console.log("Data being sent:", data);

            try {
                const response = await fetch("http://127.0.0.1:8000/predict/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById("output").innerHTML = 
                    `<div class="alert-success">Car Price : $${result.Prediction.toFixed(2)}</div>`;
            } catch (error) {
                document.getElementById("output").innerHTML = 
                    `<div class="alert alert-danger">Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>